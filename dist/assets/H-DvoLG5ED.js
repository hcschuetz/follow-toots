(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=(e,t)=>t.some(t=>e instanceof t),t,n;function r(){return t||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function i(){return n||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var a=new WeakMap,o=new WeakMap,s=new WeakMap;function c(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(m(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return s.set(t,e),t}function l(e){if(a.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});a.set(e,t)}var u={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return a.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function d(e){u=e(u)}function f(e){return i().includes(e)?function(...t){return e.apply(h(this),t),m(this.request)}:function(...t){return m(e.apply(h(this),t))}}function p(t){return typeof t==`function`?f(t):(t instanceof IDBTransaction&&l(t),e(t,r())?new Proxy(t,u):t)}function m(e){if(e instanceof IDBRequest)return c(e);if(o.has(e))return o.get(e);let t=p(e);return t!==e&&(o.set(e,t),s.set(t,e)),t}var h=e=>s.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=m(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(m(o.result),e.oldVersion,e.newVersion,m(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var _=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],v=[`put`,`add`,`delete`,`clear`],y=new Map;function b(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(y.get(t))return y.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return y.set(t,a),a}d(e=>({...e,get:(t,n,r)=>b(t,n)||e.get(t,n,r),has:(t,n)=>!!b(t,n)||e.has(t,n)}));var x=[`continue`,`continuePrimaryKey`,`advance`],S={},C=new WeakMap,w=new WeakMap,T={get(e,t){if(!x.includes(t))return e[t];let n=S[t];return n||=S[t]=function(...e){C.set(this,w.get(this)[t](...e))},n}};async function*E(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;let n=new Proxy(t,T);for(w.set(n,t),s.set(n,h(t));t;)yield n,t=await(C.get(n)||t.continue()),C.delete(n)}function D(t,n){return n===Symbol.asyncIterator&&e(t,[IDBIndex,IDBObjectStore,IDBCursor])||n===`iterate`&&e(t,[IDBIndex,IDBObjectStore])}d(e=>({...e,get(t,n,r){return D(t,n)?E:e.get(t,n,r)},has(t,n){return D(t,n)||e.has(t,n)}}));var O=g(`followToots`,1,{upgrade(e){[...e.objectStoreNames].forEach(t=>e.deleteObjectStore(t)),e.createObjectStore(`treeOverview`,{keyPath:`key`}),e.createObjectStore(`treeDetails`,{keyPath:`key`}),e.createObjectStore(`config`,{keyPath:`key`}),e.createObjectStore(`accessTokens`,{keyPath:`instance`})}});function k(e,...t){let[n,...r]=e.split(`.`),i=document.createElement(n);for(let e of r)i.classList.add(e);for(let n of t){let t=typeof n==`function`?n(i):n;t==null||(typeof t==`string`||t instanceof HTMLElement?i.append(t):t instanceof DocumentFragment?i.append(...t.childNodes):(t.constructor!==Object&&console.warn(`Attributes for ${e} not a plain object: ${t}`),Object.entries(t).forEach(([e,t])=>{e.startsWith(`@`)?i.addEventListener(e.substring(1),t):i[e]=t})))}return i}const A=k;export{A as n,O as r,k as t};